#!/bin/bash

if [ "$1" == "" ]; then
    echo "Find domains from Main Domain"
    echo "Execute $0 maindomain.com.br"
else
    page=$(wget -qO- $1)
    domains=$(echo "$page" | grep -o '<a.*http\(s\)\?://\(www.\)\?[^"]*' | awk -F / '{print $3}' | sort -u)

    for domain in $domains
    do
        host "$domain" | grep 'has address' | awk -F ' ' '{print $1 " - " $4}'
    done
fi;
