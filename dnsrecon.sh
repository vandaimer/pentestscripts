#!/bin/bash

if [ "$1" == "" ] || [ "$2" == "" ];then
	echo "Execute $0 dominio.com.br wordlistfile"
	exit
fi

echo "Finding Name Servers #"
echo "----------------------"
echo "----------------------"
echo ""

	list=$(host -t ns "$1" | cut -d " " -f4)
	for n in $list;do
		echo "$n"
	done;

echo ""
echo "----------------------"
echo "----------------------"
echo "Finding Mail Server  #"
echo "----------------------"
echo "----------------------"
echo ""

	list=$(host -t mx $1 | cut -d " " -f7)
	for n in $list;do
		echo "$n"
	done;

echo ""
echo "----------------------"
echo "----------------------"
echo "Trying Zone Tranfers #"
echo "----------------------"
echo "----------------------"
echo ""

	list=$(host -t ns "$1" | cut -d " " -f4)

	for server in $list;do
		faield=$(host -l $1 "$server" | grep "REFUSED")
		if [ "$faield" == "" ];then
			host -l "$1" "$server"
		fi
	done

echo ""
echo "----------------------"
echo "----------------------"
echo "Finding subdomais    #"
echo "----------------------"
echo "----------------------"
echo ""

for sub in $(cat $2);do
	hassub=$(host $sub.$1 | grep -v "not found")
	if [ "$hassub" != "" ];then
		echo $hassub
	fi
done
